<!DOCTYPE html><html lang="en" itemscope="" itemType="http://schema.org/WebPage" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><script async="" src="https://inform.everyone.wtf/legal.min.js?float"></script><meta name="viewport" content="width=device-width, initial-scale=1"/><title>High on Code!</title><meta itemProp="name" content="High on Code!"/><meta name="og:title" content="High on Code!"/><meta property="twitter:title" content="High on Code!"/><meta name="og:type" content="website"/><meta name="next-head-count" content="8"/><meta charSet="utf-8"/><link rel="preload" href="/_next/static/css/7a8c656a56c1f60a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7a8c656a56c1f60a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-01df828e572375b9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cb749e7011dfa68f.js" defer=""></script><script src="/_next/static/chunks/866-58bf18a37a3b099d.js" defer=""></script><script src="/_next/static/chunks/pages/index-e2cc37aaa7fd81b7.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_buildManifest.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_ssgManifest.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><article><header><h1>High on Code!</h1><span>2<!-- --> Posts</span><span><a href="/about">About</a></span></header><main><ul class="posts"><li><a href="/2016/09/28/a-rreally-bad-idea">A Rreally bad idea</a><span>Sep 28, 2016</span><span>tkw01536</span></li><li><a href="/2016/02/01/curse-of-the-doctype">Curse of the !DOCTYPE</a><span>Feb 1, 2016</span><span>thunderboltsid</span></li></ul></main></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"path":"2016/09/28/a-rreally-bad-idea","title":"A Rreally bad idea","date":"2016-09-28","author":"tkw01536","html":"\u003cp\u003e\u003ca href=\"https://www.r-project.org/\" target=\"_blank\" rel=\"noreferrer noopener\"\u003eR\u003c/a\u003e is a tool for statistical modelers and social scientists to be able to make statistical computations. As such I have come across it in the context of statistical modelling. I consider myself an experienced programmer and when I was first thrown at R I had quite some problems with it.\u003c/p\u003e\n\u003cp\u003eIt is significantly different from any other language I have worked with. In fact it is the only language I know of if I need a variable x with the value \u003ccode\u003e42\u003c/code\u003e and I write \u003ccode\u003ex = 42\u003c/code\u003e people will look at me funny. In practice, it is only done with \u003ccode\u003ex \u0026#x3C;- 42\u003c/code\u003e. Both statements do the exact same thing, but only the second one is used.\u003c/p\u003e\n\u003cp\u003eYou may ask why. R started out with just having the \u003ccode\u003e\u0026#x3C;-\u003c/code\u003e operator, but people asked to use equality instead. Problem was this was already used for equality checking. Eventually the change was implemented and the language now needs to infer from context which equality the user refers to – assignment or checking. This works well in strictly typed functional languages (such as SML or OCaml) but is difficult with R. It seems that it is discouraged to not confuse users, but then why implement it in the first place?\u003c/p\u003e\n\u003ch2\u003ePackages pollute the global namespace\u003c/h2\u003e\n\u003cp\u003eHowever this is not the only problem. The biggest fault I can see in R is namespacing — there is not really any. R has a package system that allows installing and loading of packages that extend it with further functionality. A package can be loaded by just\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# Load the car package\npackage(car)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUnfortunately this imports any function into the global namespace. Fortunate enough this particular package creates only functions that start with \u003ccode\u003ecr.\u003c/code\u003e, however this is just a convention and just serves as an identifier. There is no language construct enforcing this and an object \u003ccode\u003ecr\u003c/code\u003e simply does not exist.\u003c/p\u003e\n\u003cp\u003eIn principle, if you load a new package, it could do anything to your namespace. That includes overwriting existing values, adding new (potentially big) datatsets and adding new functions with weird names. Before loading a package, there is no real way of knowing what exactly will be loaded and what will be there afterwards.\u003c/p\u003e\n\u003cp\u003eYou might be saying this saying this is not too bad. Hold on, because this is not the worst. Loading an existing dataset into R becomes even worse.\u003c/p\u003e\n\u003ch2\u003eDatasets out of nowhere\u003c/h2\u003e\n\u003cp\u003eIn one of the recent investigations I was doing, I was asked to load an existing dataset into R. This was stored in a so-called RData file. I was also told I could use load(filename) to achieve this. At first I tried the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ehomes \u0026#x3C;- load(\"./OregonHomes.Rdata\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo my surprise, the variable homes had the string value \u003ccode\u003e\"homes\"\u003c/code\u003e afterwards. This confused the hell out of me – that was certainly not the dataset I was looking to investigate. After some time, I tried to look at the output of just the load call. Oddly enough, this produced no output at all. There was no result, no error message, no nothing.\u003c/p\u003e\n\u003cp\u003eFortunately I was using a graphical IDE which also showed me all the variables in the local namespace. I noticed that the variable homes had suddenly changed its value – the dataset that I was looking for.\u003c/p\u003e\n\u003ch2\u003eSo what the hell happened?\u003c/h2\u003e\n\u003cp\u003eTurns out that an Rdata file does not contain a single variable, it contains an entire environment. It is actually just a dictionary from variable names to values. By default the \u003ccode\u003eload()\u003c/code\u003e call behaves just like Pythons \u003ccode\u003efrom package import *\u003c/code\u003e, dumping everything in the global namespace.\u003c/p\u003e\n\u003cp\u003eThis is something which should never be done because of a lot of unexpected side effects – accidentally overwriting a variable for example. Importing datasets is thus just as bad as package loading. There seems to be no easy way of just exporting a single variable and loading it later.\u003c/p\u003e\n\u003cp\u003eLooking at the documentation of the load function now, there is a way to namespace this, but it is non-obvious why one can not just assign it to a namespace by storing the output of the load call. It is also very difficult to just load a single variable.\u003c/p\u003e\n\u003cp\u003eIt seems that this is the behavior of most of Rs code base – it seems more of a philosophy. Everything assumes the global namespace by default, everything else needs to be given by separate arguments. Of course none of this is taught in tutorials or classes – they just leave you to deal with the shitty defaults.\u003c/p\u003e\n\u003cp\u003eIn conclusion, no the title of this post is not a typo – R is just a rreally bad idea when trying to structurally write code.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/rmeme.jpg\" alt=\"Or you can use R, but it\u0026#x27;s not a real programming language\"\u003e\u003c/p\u003e\n"},{"path":"2016/02/01/curse-of-the-doctype","title":"Curse of the !DOCTYPE","date":"2016-02-01","author":"thunderboltsid","html":"\u003cp\u003eDOCTYPE: The enigmatic syntactical declaration that’s forced down the throat of amateur web developers and designers without much understanding of what it implies. Sure, some person might’ve mentioned that it means document type, which is true, in a way, it does not quite reflect it’s true idea.\u003c/p\u003e\n\u003cp\u003ePresence or Absence of a DOCTYPE can lead to interesting and unpredictable (but not unforeseen) results. This started off at my previous internship. I was working on a visualization intensive web application that was supposed to help the company with better decision making. This was a typical django stack  with Angular.JS for the frontend, Postgres for database needs, and memcached for caching. One fine day, while refactoring the home page into a separate base layer  comprising of only the staticfiles (CSS + JS) which other pages can import, I broke the whole application.\u003c/p\u003e\n\u003cp\u003eWell, to say that would be a bit of an understatement, because random things stopped working that shouldn’t have had any connection with the changes or any reason to break in the first place. Hours (incl. Döner, Coffee, and Beer) were spent frustratingly trying to hunt down the origin of this bug . None of the resultant bugs made any sense with regards to the commit history. All of a sudden, things just stopped working and it was like a spell of voodoo. After frustrating hours, we just started thinking backwards. After a while, my colleague, who’s arguably way more experienced in the art of web dev than I am, started laughing uncontrollably as if he figured out everything and it turned out to be trivial. He asked me what was my “Brilliant idea of the day” and I remembered the DOCTYPE declaration that I added besides the refactoring. But, the thought was quickly brushed aside since I wondered it’s just a DOCTYPE. Something so basic shouldn’t cause a problem. I mean, wasn’t my browser adding it from me before, anyway? After I couldn’t find any other culprit, I decided to give it a shot and removed the DOCTYPE declaration.\u003c/p\u003e\n\u003cp\u003eVoila! Everything started working the way it was supposed to without any further modifications. This left me in a state of disbelief. How can something so benign, have such a significant impact on the state of an application. Now, if I were using some old school DOCTYPE, that might make a little bit of sense, but, no, I was using the regular, good old, HTML5 doctype. Whoops! What went wrong here?\u003c/p\u003e\n\u003cp\u003eTo this day, it stays a mystery to me. Haunting me over those drunk escapades at times. Something that my puny human brain can’t possibly understand. We’re living in a world of over-smart browsers and perpetually stumped developers. One day, I’ll get to the bottom of this… Until then, Browsers – 1, Me – 0.\u003c/p\u003e\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"an0cDCRUXKfId-x9GzWGE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>