<!DOCTYPE html><html lang="en" itemscope="" itemType="http://schema.org/WebPage" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><script async="" src="https://inform.everyone.wtf/legal.min.js?float"></script><meta name="viewport" content="width=device-width, initial-scale=1"/><title>A Rreally bad idea | High on Code!</title><meta itemProp="name" content="A Rreally bad idea | High on Code!"/><meta name="og:title" content="A Rreally bad idea | High on Code!"/><meta property="twitter:title" content="A Rreally bad idea | High on Code!"/><meta name="og:type" content="website"/><meta name="next-head-count" content="8"/><meta charSet="utf-8"/><link rel="preload" href="/_next/static/css/7a8c656a56c1f60a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7a8c656a56c1f60a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-01df828e572375b9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cb749e7011dfa68f.js" defer=""></script><script src="/_next/static/chunks/866-58bf18a37a3b099d.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-fb5bbc4273bde28c.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_buildManifest.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_ssgManifest.js" defer=""></script><script src="/_next/static/an0cDCRUXKfId-x9GzWGE/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><article itemscope="" itemType="https://schema.org/Blog"><header><h1 itemProp="name headline">A Rreally bad idea</h1><span><time dateTime="2016-09-28" itemProp="datePublished">Sep 28, 2016</time></span><span itemProp="author" itemscope="" itemType="https://schema.org/Person"><span itemProp="name">tkw01536</span></span><nav aria-label="Navigation" itemscope="" itemType="https://schema.org/SiteNavigationElement"><span><a itemProp="url" href="/">Home</a></span><span><a itemProp="url" href="/about">About</a></span></nav></header><main><p><a href="https://www.r-project.org/" target="_blank" rel="noreferrer noopener">R</a> is a tool for statistical modelers and social scientists to be able to make statistical computations. As such I have come across it in the context of statistical modelling. I consider myself an experienced programmer and when I was first thrown at R I had quite some problems with it.</p>
<p>It is significantly different from any other language I have worked with. In fact it is the only language I know of if I need a variable x with the value <code>42</code> and I write <code>x = 42</code> people will look at me funny. In practice, it is only done with <code>x &#x3C;- 42</code>. Both statements do the exact same thing, but only the second one is used.</p>
<p>You may ask why. R started out with just having the <code>&#x3C;-</code> operator, but people asked to use equality instead. Problem was this was already used for equality checking. Eventually the change was implemented and the language now needs to infer from context which equality the user refers to – assignment or checking. This works well in strictly typed functional languages (such as SML or OCaml) but is difficult with R. It seems that it is discouraged to not confuse users, but then why implement it in the first place?</p>
<h2>Packages pollute the global namespace</h2>
<p>However this is not the only problem. The biggest fault I can see in R is namespacing — there is not really any. R has a package system that allows installing and loading of packages that extend it with further functionality. A package can be loaded by just</p>
<pre><code># Load the car package
package(car)
</code></pre>
<p>Unfortunately this imports any function into the global namespace. Fortunate enough this particular package creates only functions that start with <code>cr.</code>, however this is just a convention and just serves as an identifier. There is no language construct enforcing this and an object <code>cr</code> simply does not exist.</p>
<p>In principle, if you load a new package, it could do anything to your namespace. That includes overwriting existing values, adding new (potentially big) datatsets and adding new functions with weird names. Before loading a package, there is no real way of knowing what exactly will be loaded and what will be there afterwards.</p>
<p>You might be saying this saying this is not too bad. Hold on, because this is not the worst. Loading an existing dataset into R becomes even worse.</p>
<h2>Datasets out of nowhere</h2>
<p>In one of the recent investigations I was doing, I was asked to load an existing dataset into R. This was stored in a so-called RData file. I was also told I could use load(filename) to achieve this. At first I tried the following:</p>
<pre><code>homes &#x3C;- load("./OregonHomes.Rdata")
</code></pre>
<p>To my surprise, the variable homes had the string value <code>"homes"</code> afterwards. This confused the hell out of me – that was certainly not the dataset I was looking to investigate. After some time, I tried to look at the output of just the load call. Oddly enough, this produced no output at all. There was no result, no error message, no nothing.</p>
<p>Fortunately I was using a graphical IDE which also showed me all the variables in the local namespace. I noticed that the variable homes had suddenly changed its value – the dataset that I was looking for.</p>
<h2>So what the hell happened?</h2>
<p>Turns out that an Rdata file does not contain a single variable, it contains an entire environment. It is actually just a dictionary from variable names to values. By default the <code>load()</code> call behaves just like Pythons <code>from package import *</code>, dumping everything in the global namespace.</p>
<p>This is something which should never be done because of a lot of unexpected side effects – accidentally overwriting a variable for example. Importing datasets is thus just as bad as package loading. There seems to be no easy way of just exporting a single variable and loading it later.</p>
<p>Looking at the documentation of the load function now, there is a way to namespace this, but it is non-obvious why one can not just assign it to a namespace by storing the output of the load call. It is also very difficult to just load a single variable.</p>
<p>It seems that this is the behavior of most of Rs code base – it seems more of a philosophy. Everything assumes the global namespace by default, everything else needs to be given by separate arguments. Of course none of this is taught in tutorials or classes – they just leave you to deal with the shitty defaults.</p>
<p>In conclusion, no the title of this post is not a typo – R is just a rreally bad idea when trying to structurally write code.</p>
<p><img src="/media/rmeme.jpg" alt="Or you can use R, but it&#x27;s not a real programming language"></p>
</main></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"path":"2016/09/28/a-rreally-bad-idea","title":"A Rreally bad idea","date":"2016-09-28","author":"tkw01536","html":"\u003cp\u003e\u003ca href=\"https://www.r-project.org/\" target=\"_blank\" rel=\"noreferrer noopener\"\u003eR\u003c/a\u003e is a tool for statistical modelers and social scientists to be able to make statistical computations. As such I have come across it in the context of statistical modelling. I consider myself an experienced programmer and when I was first thrown at R I had quite some problems with it.\u003c/p\u003e\n\u003cp\u003eIt is significantly different from any other language I have worked with. In fact it is the only language I know of if I need a variable x with the value \u003ccode\u003e42\u003c/code\u003e and I write \u003ccode\u003ex = 42\u003c/code\u003e people will look at me funny. In practice, it is only done with \u003ccode\u003ex \u0026#x3C;- 42\u003c/code\u003e. Both statements do the exact same thing, but only the second one is used.\u003c/p\u003e\n\u003cp\u003eYou may ask why. R started out with just having the \u003ccode\u003e\u0026#x3C;-\u003c/code\u003e operator, but people asked to use equality instead. Problem was this was already used for equality checking. Eventually the change was implemented and the language now needs to infer from context which equality the user refers to – assignment or checking. This works well in strictly typed functional languages (such as SML or OCaml) but is difficult with R. It seems that it is discouraged to not confuse users, but then why implement it in the first place?\u003c/p\u003e\n\u003ch2\u003ePackages pollute the global namespace\u003c/h2\u003e\n\u003cp\u003eHowever this is not the only problem. The biggest fault I can see in R is namespacing — there is not really any. R has a package system that allows installing and loading of packages that extend it with further functionality. A package can be loaded by just\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# Load the car package\npackage(car)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUnfortunately this imports any function into the global namespace. Fortunate enough this particular package creates only functions that start with \u003ccode\u003ecr.\u003c/code\u003e, however this is just a convention and just serves as an identifier. There is no language construct enforcing this and an object \u003ccode\u003ecr\u003c/code\u003e simply does not exist.\u003c/p\u003e\n\u003cp\u003eIn principle, if you load a new package, it could do anything to your namespace. That includes overwriting existing values, adding new (potentially big) datatsets and adding new functions with weird names. Before loading a package, there is no real way of knowing what exactly will be loaded and what will be there afterwards.\u003c/p\u003e\n\u003cp\u003eYou might be saying this saying this is not too bad. Hold on, because this is not the worst. Loading an existing dataset into R becomes even worse.\u003c/p\u003e\n\u003ch2\u003eDatasets out of nowhere\u003c/h2\u003e\n\u003cp\u003eIn one of the recent investigations I was doing, I was asked to load an existing dataset into R. This was stored in a so-called RData file. I was also told I could use load(filename) to achieve this. At first I tried the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ehomes \u0026#x3C;- load(\"./OregonHomes.Rdata\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo my surprise, the variable homes had the string value \u003ccode\u003e\"homes\"\u003c/code\u003e afterwards. This confused the hell out of me – that was certainly not the dataset I was looking to investigate. After some time, I tried to look at the output of just the load call. Oddly enough, this produced no output at all. There was no result, no error message, no nothing.\u003c/p\u003e\n\u003cp\u003eFortunately I was using a graphical IDE which also showed me all the variables in the local namespace. I noticed that the variable homes had suddenly changed its value – the dataset that I was looking for.\u003c/p\u003e\n\u003ch2\u003eSo what the hell happened?\u003c/h2\u003e\n\u003cp\u003eTurns out that an Rdata file does not contain a single variable, it contains an entire environment. It is actually just a dictionary from variable names to values. By default the \u003ccode\u003eload()\u003c/code\u003e call behaves just like Pythons \u003ccode\u003efrom package import *\u003c/code\u003e, dumping everything in the global namespace.\u003c/p\u003e\n\u003cp\u003eThis is something which should never be done because of a lot of unexpected side effects – accidentally overwriting a variable for example. Importing datasets is thus just as bad as package loading. There seems to be no easy way of just exporting a single variable and loading it later.\u003c/p\u003e\n\u003cp\u003eLooking at the documentation of the load function now, there is a way to namespace this, but it is non-obvious why one can not just assign it to a namespace by storing the output of the load call. It is also very difficult to just load a single variable.\u003c/p\u003e\n\u003cp\u003eIt seems that this is the behavior of most of Rs code base – it seems more of a philosophy. Everything assumes the global namespace by default, everything else needs to be given by separate arguments. Of course none of this is taught in tutorials or classes – they just leave you to deal with the shitty defaults.\u003c/p\u003e\n\u003cp\u003eIn conclusion, no the title of this post is not a typo – R is just a rreally bad idea when trying to structurally write code.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/media/rmeme.jpg\" alt=\"Or you can use R, but it\u0026#x27;s not a real programming language\"\u003e\u003c/p\u003e\n"},"path":"2016-09-28-a-rreally-bad-idea"},"__N_SSG":true},"page":"/[...path]","query":{"path":["2016","09","28","a-rreally-bad-idea"]},"buildId":"an0cDCRUXKfId-x9GzWGE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>